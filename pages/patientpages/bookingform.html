<!DOCTYPE html>
<html lang="en">

<head>
	<title>Donate Now</title>
	<link rel="stylesheet" href="../../assets/css/donation.css">
	<link rel="stylesheet" href="../../assets/css/common.css">
	<script src="https://kit.fontawesome.com/98f622c388.js" crossorigin="anonymous"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<!-- include the jQuery library from a CDN -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<!-- include the jQuery UI library from a CDN -->
	<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
	<!-- include the jQuery UI CSS theme -->
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/smoothness/jquery-ui.css">
	<link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;700;900&display=swap" rel="stylesheet">
	<script src="../../assets/js/sweetalert.min.js"></script>

</head>

<body>
	<!-- <div class="checkbox">
		<label for="click" class="text">screen reader</label>
		<input type="checkbox" id="click" >
  
	  </div> -->
	<div id="google_translate_element" class="translate"></div>

	<nav>
		<div class="side-nav">
			<a href="../../index.html"> <img src="../../assets/images/logo.png" width="250px" alt="image error"
					class="logoimg"></a>
			<ul class="navlinks">


				<li><a href="../about/schemes.html"><i class="fa-solid fa-gift"></i>Schemes</a></li>
				<li><a href="../donarpages/donationrequest.html"><i
							class="fa-solid fa-circle-dollar-to-slot"></i>Donatenow</a></li>
				<li><a href="../about/aboutus.html"><i class="fa-solid fa-users"></i>
						<p>About</p>
					</a></li>
				<li><a href="../patientpages/gethelp.html"><i class="fa-solid fa-truck-medical"></i>Gethelp</a></li>
				<li><a href="../donarpages/place.html"><i class="fa-solid fa-calendar-days"></i>Events</a></li>


				<li><a href="../donarpages/involve.html"><i class="fa-brands fa-superpowers"></i>GetInvolved</a></li>
				<li><a href="../beinspired/inspire.html"><i class="fa-solid fa-dragon"></i>BeInspired</a></li>
				<li><a href="../about/profile.html"><i class="fa-solid fa-hospital-user"></i>Yourprofile</a></li>
				<div class="active"></div>
		</div>
	</nav>
	<div class="full book">
		<div class="container">
			<!-- <div class="img-container"> -->
			<h1>Book Now</h1>
			<img src="../../assets/images/donateus.jpg" alt="" width="425px" class="bookimg ">
			<!-- </div> -->
			<form id="register">
				<label for="name">Name:</label>
				<input type="text" id="name" name="name" required pattern="[a-zA-Z]+"
					title="name must only in alphabets">
				<label for="email">Email:</label>
				<input type="email" id="email" name="email" required>
				<label for="mobile">Mobile</label>
				<input type="text" id="mobile" name="mobile" required pattern="[0-9]\d*" maxlength="10"
					title="mobile number must be 10 digit number">
				<label for="mobile">booking date</label>
				<input type="text" id="calender" name="mobile" required>
				<button id="submit" onclick="isac()"> submit</button>
			</form>

		</div>
	</div>
</body>
<input type="text" id="message">
  <script src="../../assets/js/voicenavigator.js"></script>
<script src="https://smtpjs.com/v3/smtp.js"></script>

<script>
	let username = localStorage.getItem("userprofile_name")
	let users = JSON.parse(localStorage.getItem("user"))
	let name = document.getElementById("name");
	let email = document.getElementById("email");
	let phone = document.getElementById("mobile");

	users.find(e => {
		if (e["user_email"] == username) {
			name.value = e["user_name"]
			email.value = e["user_email"]
			phone.value = e["mobileno"]

		}
	})
</script>
<script>


	let register_1 = document.getElementById("register");
	register_1.addEventListener("submit", e => {
		e.preventDefault();
	})

	const url = window.location.search;
	const urlParams = new URLSearchParams(url);
	const hospitalname = urlParams.get("bookname")


	let hos = JSON.parse(localStorage.getItem("hospitalrequests"))
	let img;
	hos.find(e => {
		if (e["hospital_title"] == hospitalname) {
			img = e["hospitals_images"]["source"]
		}
	})
	// let hosimg=urlParams.get("img")
	// console.log(hospitalname);
	// const todays = new Date();

	// let arr={
	// 	"time":todays,

	// 	"name":hospitalname
	// }
	// localStorage.setItem(JSON.stringify("user_bookings",arr))

	let input = "1234567890"

	let op = "";
	for (i = 0; i <= 7; i++) {
		op += input.charAt(Math.floor(Math.random() * op.length));
	}



	function sendemail() {


		Email.send({
			Host: "smtp.elasticemail.com",
			Username: "freshtrustproject@gmail.com",
			Password: "3A631975AD1F826BFD0004A6C73ACFA2BC54",
			To: document.getElementById("email").value,
			// To:"isacdevaabishek2@gmail.com",
			From: "freshtrustproject@gmail.com",
			Subject: "hospital application",
			Body: "NAME: " + document.getElementById("name").value
				+ "<br> email: " + document.getElementById("email").value
				+ "<br> MOBILE NUMBER: " + document.getElementById("mobile").value
				+ "<br> Hi " + name + "congragultion you booking was confirmed your 8 applicant id is" + op + "dont miss it"

		}).then(
			//   message => swal("yep!", "email sent to us we will contact you soon", "sucess")
			message => alert(message)
		);
	}



	const today = new Date();
	console.log(today);
	// const today = new Date();
	$('#calender').datepicker({
		minDate: today
	});


	function isac() {
		let user = localStorage.getItem("userprofile_name")
		let name = document.getElementById("name").value;
		let email = document.getElementById("email").value;
		let mobile = document.getElementById("mobile").value;
		let calender = document.getElementById("calender").value;
		console.log(calender);
		booking_datas = {
			"hospital_name": hospitalname,
			"user_name": name,
			"user_mobile": mobile,
			"user_email": email,
			"date": calender
		}


		if (name && email && mobile && calender !== null) {

			let bookingarray = []
			bookingarray.push(booking_datas)
			localStorage.setItem("booking_info", JSON.stringify(bookingarray))
			sendemail();
			swal("success!", "booking sent", "success");

			// const todays = new Date();

			let arr = JSON.parse(localStorage.getItem("user_bookings")) || []
			let arrs = {
				"time": calender,
				"key1": hospitalname,
				"key2": "booking id:- "+ op,
				"user": user,
				"img": img
			}
			arr.push(arrs)
			localStorage.setItem("user_bookings", JSON.stringify(arr))




			function re() {
				window.location.href = "bookhospital.html"
			}
			setInterval(re, 1000);

		}

	}





</script>
<script src="../../assets/js/screenreader.js"></script>
<script src="../../assets/js/contentreader.js"></script>


<script>
	let cnt = -1;
	let tags;
	let tag_length = 0;


	let cnts = -1;
	let tag;
	let tags_length = 0;

	document.onkeydown = function (event) {
		if (event.keyCode == 39) {
			if (cnt < tag_length && cnt >= -1) {
				cnt++;
			}
			screenreader_selector(".side-nav a", cnt, "You reached the end")

		}

		if (event.keyCode == 37) {
			if (cnt > -1) {
				cnt--;
			}
			// console.log(cnt+": 2")
			screenreader_selector(".side-nav a", cnt, "You are on the top")

		}
		if (event.keyCode == 40) {
			if (cnts < tags_length && cnts >= -1) {
				cnts++;
			}
			screenreader_content("label,button", cnts, "You reached the end")

		}

		if (event.keyCode == 38) {
			if (cnts > -1) {
				cnts--;
			}
			// console.log(cnt+": 2")
			screenreader_content("label,button", cnts, "You are on the top")

		}
		if (event.keyCode == 13) {
			let anchorTags = document.querySelectorAll(".side-nav a");
			anchorTags[cnt].click();
		}
		if (event.keyCode == 16) {
			let contentanchor = document.querySelectorAll("label,button")
			contentanchor[cnts].click();
		}

	};

</script>


<script>
	document.addEventListener('keydown', function (event) {
		if (event.keyCode >= 37 && event.keyCode <= 40) {
			event.preventDefault();
		}
	});


</script>

</html>